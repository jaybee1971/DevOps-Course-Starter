{% extends "layout.html" %}
{% block title %}Jason B To-Do App{% endblock %}

{% block content %}
  <div class="jumbotron" style="background-color:DodgerBlue;color:White;">
    <h1 class="display-4">My To-Do App</h1>
      <hr class="my-4">
      <p class="lead">Now with new and improved Trello API calls</p>
  </div>

    <div class="row" style="border:2px solid DodgerBlue;">
        <div class="col-md-12" style="margin-top: 20px; margin-bottom: 20px;">
            <h2>Add a New To-Do Item</h2>
            <form action="/create" method="POST">
                <div class="form-inline">
                    <div class="form-group" style="flex: 1">
                        <label class="col-sm-1" for="add_todo">Title:</label>
                        <input required style="flex: 1" class="form-control" type="text" id="add_todo" name="add_todo" maxlength="64" placeholder="New To-Do Title">
                    </div>
                </div>
                <div class="form-inline">
                    <div class="form-group" style="flex: 1">    
                        <label class="col-sm-1" for="add_desc">Description:</label>
                        <input required style="flex: 1" class="form-control" type="text" id="add_desc" name="add_desc" maxlength="64" placeholder="To-Do Description">
                    </div>
                    <div>
                        <button class="btn btn-dark" type="submit">Add</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12" style="margin-top: 40px;">
            <h2 id="todo_table">Your To-Do List</h2>
            <p>This is a list of your to-do items, check them off once completed or delete as required</p>
            <form action="/update" method="POST">
                <div class="form-group">
                    <table class="table table-striped" style="width: 100%">
                        <thead>
                        <tr>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Action</th>
                        </tr>
                        </thead>
                        {% for item in items %}
                            <tr>
                                <td>{{item.title}}</td>
                                <td>{{item.description}}</td>
                                <td>
                                    <select class="custom-select" name="{{ item.trello_id }}">
                                        {% if item.status == 'Completed' %}
                                        <option value="Not Started" name="{{ item.trello_id }}">Not Started</option>
                                        <option value="In Progress" name="{{ item.trello_id }}">In Progress</option>
                                        <option selected="selected" value="Completed" name="{{ item.trello_id }}">Completed</option>
                                        {% elif item.status == 'In Progress' %}
                                        <option value="Not Started" name="{{ item.trello_id }}">Not Started</option>
                                        <option selected="selected" value="In Progress" name="{{ item.trello_id }}">In Progress</option>
                                        <option value="Completed" name="{{ item.trello_id }}">Completed</option>
                                        {% else %}
                                        <option selected="selected" value="Not Started" name="{{ item.trello_id }}">Not Started</option>
                                        <option value="In Progress" name="{{ item.trello_id }}">In Progress</option>
                                        <option value="Completed" name="{{ item.trello_id }}">Completed</option>
                                        {% endif %}
                                        <option value="Delete" name="{{ item.trello_id }}">Delete</option>
                                    </select>
                                </td>
                            </tr>
                        {% endfor %}
                    </table>
                    <div>
                        <button class="btn btn-dark" type="submit">Update List</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

{% endblock %}